<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  <div id="show-data"></div>

  <button id="make-req">Click</button>


  <button id="json-data">Json</button>
  <button id="api-data">API</button>


  <script>
    const btn = document.getElementById("make-req");
    const div = document.getElementById("show-data");
    const jsonBtn = document.getElementById("json-data");
    const apiBtn = document.getElementById("api-data");

    const xhr = new XMLHttpRequest();

    // jsonBtn.addEventListener("click", () => {
    //   xhr.open("GET", "data.json", true);
    //   xhr.onreadystatechange = function () {
    //     if(this.readyState == 4 && this.status == 200) {
    //       div.innerText = JSON.stringify(this.responseText);
    //     }
    //   }
    //   xhr.send();
    // })

    // apiBtn.addEventListener("click", () => {
    //   xhr.open("GET", "https://jsonplaceholder.typicode.com/posts/1", true);
    //   xhr.onreadystatechange = function() {
    //     if(this.readyState == 4 && this.status) {
    //       div.innerHTML = JSON.stringify(this.responseText);
    //     }
    //   }
    //   xhr.send();
    // })


    btn.addEventListener("click", () => {

      xhr.open("GET", "/sample.txt", true);

      console.log(xhr.readyState);


      // xhr.onprogress = function () {
      //   console.log(xhr.readyState);
      // }


      // xhr.onerror = function() {
      //   console.log("request error...");
      // }

      // xhr.onload = function() {
      //   console.log(xhr.readyState);
      //   if(xhr.status == 200) {
      //     console.log(xhr.responseText)
      //   }
      // }

      
      xhr.onreadystatechange = function() {
        console.log(xhr.readyState);
        if(this.readyState == 4 && this.status == 200) {
          div.innerHTML = this.responseText
        }
      }

      // 0 : request not init
      // 1 : server connection established
      // 2 : request received
      // 3 : processing request
      // 4 : request is finished and response is ready
      xhr.send();
    }) 


  </script>

</body>
</html>